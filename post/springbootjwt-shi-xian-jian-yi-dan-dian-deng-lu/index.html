<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Springboot+jwtå®ç°ç®€æ˜“å•ç‚¹ç™»å½•ğŸ¤£ | Homchen Blog</title>
<link rel="shortcut icon" href="https://homchen.github.io/favicon.ico?v=1694134577381">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://homchen.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="Springboot+jwtå®ç°ç®€æ˜“å•ç‚¹ç™»å½•ğŸ¤£ | Homchen Blog - Atom Feed" href="https://homchen.github.io/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="æœ¬æ–‡å°†æ•™ä½ å¦‚ä½•ä½¿ç”¨Springboot+jwtå¿«é€Ÿå¼€å‘å•ç‚¹ç™»å½•

å‰è¨€
æœ¬æ–‡é€‚ç”¨äºå…¥é—¨JavaWebå°šæµ…ï¼Œä¸”ä¼šä½¿ç”¨springbootæ¡†æ¶è¿›è¡Œå•ä½“é¡¹ç›®å¼€å‘çš„æ–°æ‰‹ç¨‹åºå‘˜~

ä¸ºä»€ä¹ˆè¦ä½¿ç”¨jwt
ä»€ä¹ˆæ˜¯jwt
ğŸ”¥jwtç”±3éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯He..." />
    <meta name="keywords" content="Java,åç«¯" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://homchen.github.io">
  <img class="avatar" src="https://homchen.github.io/images/avatar.png?v=1694134577381" alt="">
  </a>
  <h1 class="site-title">
    Homchen Blog
  </h1>
  <p class="site-description">
    ä¸€ä¸ªæ–°æ‰‹çš„åšå®¢
  </p>
  <div class="menu-container">
    
      
        <a href="https://homchen.github.io" class="menu">
          ğŸ é¦–é¡µ
        </a>
      
    
      
        <a href="https://homchen.github.io/archives" class="menu">
          ğŸ“–å½’æ¡£
        </a>
      
    
      
        <a href="https://homchen.github.io/tags" class="menu">
          ğŸ·æ ‡ç­¾
        </a>
      
    
      
        <a href="https://homchen.github.io/post/about" class="menu">
          âš™å…³äº
        </a>
      
    
      
        <a href="https://homchen.github.io/post/you-lian" class="menu">
          ğŸ§‘â€ğŸ¤â€ğŸ§‘å‹é“¾
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              Springboot+jwtå®ç°ç®€æ˜“å•ç‚¹ç™»å½•ğŸ¤£
            </h2>
            <div class="post-info">
              <span>
                2023-05-12
              </span>
              <span>
                8 min read
              </span>
              
                <a href="https://homchen.github.io/tag/zXwk_tOa3/" class="post-tag">
                  # Java
                </a>
              
                <a href="https://homchen.github.io/tag/qhkrBCXtj/" class="post-tag">
                  # åç«¯
                </a>
              
            </div>
            
              <img class="post-feature-image" src="https://tm-image.tianyancha.com/tm/9c7ddc1e0e9a7f633ad2a3214a260daa.jpg" alt="">
            
            <div class="post-content-wrapper">
              <div class="post-content" v-pre>
                <p>æœ¬æ–‡å°†æ•™ä½ å¦‚ä½•ä½¿ç”¨Springboot+jwtå¿«é€Ÿå¼€å‘å•ç‚¹ç™»å½•</p>
<!-- more -->
<h1 id="å‰è¨€"><strong>å‰è¨€</strong></h1>
<p>æœ¬æ–‡é€‚ç”¨äºå…¥é—¨JavaWebå°šæµ…ï¼Œä¸”ä¼šä½¿ç”¨springbootæ¡†æ¶è¿›è¡Œå•ä½“é¡¹ç›®å¼€å‘çš„æ–°æ‰‹ç¨‹åºå‘˜~</p>
<hr>
<h1 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨jwt"><strong>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨jwt</strong></h1>
<h2 id="ä»€ä¹ˆæ˜¯jwt"><strong>ä»€ä¹ˆæ˜¯jwt</strong></h2>
<p>ğŸ”¥<strong>jwt</strong>ç”±3éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯<strong>Header</strong>å¤´éƒ¨ã€<strong>Payload</strong>æ•°æ®ã€<strong>Signature</strong>ç­¾åã€‚</p>
<pre><code class="language-json">// Header
{
    &quot;alg&quot;: &quot;HS256&quot;,
    &quot;typ&quot;: &quot;JWT&quot;
}

// Payload
{
    // reserved claims
    &quot;uid&quot;: &quot;1234567890&quot;,
    &quot;nickname&quot;: &quot;homchen&quot;
    ...
}
</code></pre>
<pre><code class="language-java">// Signature
Signature = HS256(Base64(Header) + &quot;.&quot; + Base64(Payload), &quot;è‡ªå®šä¹‰å¯†é’¥key&quot; );

// JWT
JWT = Base64(Header) + &quot;.&quot; + Base64(Payload) + &quot;.&quot; + Signature;
</code></pre>
<p>é¦–å…ˆï¼Œ<mark>æ ¹æ®æŒ‡å®šçš„ğŸ“<strong>åŠ å¯†ç®—æ³•</strong>å’ŒğŸ”‘<strong>å¯†é’¥</strong>å¯¹æ•°æ®ä¿¡æ¯åŠ å¯†å¾—åˆ°ä¸€ä¸ªç­¾å</mark>ï¼Œç„¶åå°†ç®—æ³•ã€æ•°æ®ã€ç­¾åï¼ˆ<strong>å¯†é’¥</strong>è‡ªå·±ä¿ç®¡å¥½ï¼‰ä¸€èµ·ç”¨Base64åŠ å¯†çš„åˆ°ä¸€ä¸ªJWTå­—ç¬¦ä¸²ã€‚</p>
<p>çœ‹åˆ°è¿™é‡Œæˆ–è®¸æœ‰äººä¼šé—®ï¼š&quot;åªè¦æ‹¿åˆ°jwtï¼Œé‚£è¿™æ ·ä¸å°±è°éƒ½å¯ä»¥çœ‹åˆ°<strong>æ•°æ®</strong>äº†å—ï¼Ÿ&quot;<br>
æ˜¯çš„æ²¡é”™ï¼Œå› æ­¤æˆ‘ä»¬ä¸åº”è¯¥æŠŠä¸€äº›æ•æ„Ÿæ•°æ®æ”¾è¿›å»ï¼Œä¸€èˆ¬ä¿å­˜UIDå’Œç”¨æˆ·æ˜µç§°å°±å¤Ÿäº†ã€‚</p>
<h2 id="æ€ä¹ˆè®¤è¯">ğŸ”<strong>æ€ä¹ˆè®¤è¯</strong></h2>
<p>å› æ­¤æ ¹æ®è¿™ç§è®¾è®¡æ–¹å¼ï¼Œå°±è¡ç”Ÿå‡ºäº†ä¸€ç§ç‹¬ç‰¹çš„éªŒç­¾æ–¹å¼ï¼š<br>
<mark>å¯¹JWTå¯†æ–‡è¿›è¡ŒBase64è§£å¯†ä½¿ç”¨ç›¸åŒçš„<strong>ç®—æ³•</strong>å’Œ<strong>å¯†é’¥</strong>è¿›è¡Œå†æ¬¡ç­¾å</mark>ï¼Œç„¶åå°†ä¸¤æ¬¡ä¸ªç­¾åæ¯”å¯¹ï¼Œåˆ¤æ–­æ•°æ®æ˜¯å¦è¢«ç¯¡æ”¹ã€‚å¯¹æ¯”æ— è¯¯ï¼Œå°±æ˜¯è®¤è¯æˆåŠŸï¼›ååˆ™å¤±è´¥ã€‚</p>
<h2 id="å®‰å…¨æ€§">ğŸ”’<strong>å®‰å…¨æ€§</strong></h2>
<p>å¦‚æœè®¤è¯æˆåŠŸï¼Œé‚£å°±è¯æ˜è¿™ä¸ªä»¤ç‰Œä¸€å®šæ˜¯æˆ‘ä»¬è‡ªå·±ç­¾å‘çš„ï¼Œè€Œä¸æ˜¯åˆ«äººä¼ªé€ çš„ï¼Œè‡ªç„¶èƒ½æ”¾å¿ƒä½¿ç”¨JWTä¸­æºå¸¦çš„èº«ä»½æ•°æ®ã€‚ç›¸åº”çš„æˆ‘ä»¬çš„é—®é¢˜å°†ä»<mark>å¦‚ä½•ä¿è¯tokençš„çœŸå®æ€§</mark>å˜æˆäº†ï¼Œ<mark>å¦‚ä½•ä¿è¯tokenä¸è¢«éæ³•è·å–ä»è€Œå†’å……åˆ«äººçš„èº«ä»½</mark>ã€‚</p>
<p>è€Œtokenä¸è¢«éæ³•è·å–è¿™ä¸ªé—®é¢˜ä¸æ˜¯æˆ‘ä»¬ç°é˜¶æ®µåº”è¯¥è€ƒè™‘çš„é—®é¢˜ï¼Œæˆ‘ä»¬åº”è¯¥è¦å»æ€è€ƒï¼Œå‡è®¾ä»–è·å–åï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•é¿å…æ›´å¤šçš„æŸå¤±ã€‚è¿™ä¸ªé—®é¢˜çš„æ–¹æ¡ˆæœ‰å¾ˆå¤šï¼Œè¿™é‡Œå°±ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼šç»™jwtåŠ ä¸Šä¸€ä¸ª<strong>è¿‡æœŸæ—¶é—´</strong>ã€‚</p>
<pre><code class="language-json">// Payload
{
    // reserved claims
    &quot;uid&quot;: &quot;1234567890&quot;,
    &quot;nickname&quot;: &quot;homchen&quot;ï¼Œ
    &quot;timestamp&quot;:&quot;1684050452&quot;
    ...
}
</code></pre>
<p>åœ¨è®¤è¯çš„æµç¨‹ä¸Šï¼Œä¸ä»…è¦éªŒè¯jwtçš„çœŸå®æ€§ï¼Œè¿˜è¦éªŒè¯jwtä»¤ç‰Œæ˜¯å¦è¿‡æœŸã€‚è¿™æ ·å°±èƒ½ä½¿å¾—ä»¥å‰ç­¾å‘çš„ä»¤ç‰Œå¤±æ•ˆï¼Œé¿å…äº†è¢«é•¿æœŸè¢«å†’å……çš„å¯èƒ½æ€§ã€‚</p>
<p>ğŸ“¯é™¤æ­¤ä¹‹å¤–è¿˜å¯ä»¥è‡ªè¡Œå®ç°ä»¤ç‰Œç»­ç­¾åŠŸèƒ½ï¼Œè¿™é‡Œå°±ä¸å±•å¼€ç»†è¯´äº†ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è‡ªå·±æ€è€ƒä¸€ä¸‹å¦‚ä½•å®ç°ã€‚</p>
<h1 id="æ€ä¹ˆä½¿ç”¨jwtå®ç°ç™»å½•è®¤è¯">æ€ä¹ˆä½¿ç”¨jwtå®ç°ç™»å½•è®¤è¯</h1>
<p>é¦–å…ˆåœ¨mavenå¯¼å…¥åŒ…</p>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;com.auth0&lt;/groupId&gt;
    &lt;artifactId&gt;java-jwt&lt;/artifactId&gt;
    &lt;version&gt;4.3.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>åˆ›å»ºä¸€ä¸ªç±»æ¥å­˜å‚¨å½“å‰ç”¨æˆ·ä¿¡æ¯ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡éœ€æ±‚è¿›è¡Œä¿®æ”¹ã€‚</p>
<pre><code class="language-java">/**
 * å½“å‰ç”¨æˆ·å¤„ç†ç±»
 */
public class UserHandler {

    private static ThreadLocal&lt;Long&gt; t = new ThreadLocal&lt;&gt;();

    public static void set(Long uid) {
        t.set(uid);
    }

    public static Long get() {
        return t.get();
    }

    public static void remove() {
        t.remove();
    }
}
</code></pre>
<p>å†™ä¸€ä¸ªjwtå·¥å…·ç±»æ¥ï¼Œè¿›è¡Œç»Ÿä¸€ç®¡ç†ã€‚</p>
<pre><code class="language-java">import cn.hutool.core.util.StrUtil;
import com.auth0.jwt.JWT;
import com.auth0.jwt.JWTCreator;
import com.auth0.jwt.JWTVerifier;
import com.auth0.jwt.algorithms.Algorithm;
import com.auth0.jwt.interfaces.DecodedJWT;
import org.jetbrains.annotations.NotNull;

import java.time.LocalDateTime;
import java.time.ZoneOffset;
import java.util.HashMap;
import java.util.Map;

public class JwtUtils {

    /**
     * åŠ å¯†KEY
     */
    private static final String TOKEN_SECRET = &quot;jwt-secret&quot;;

    /**
     * ç”ŸæˆToken
     *
     * @param uid      ç”¨æˆ·id
     * @param nickname æ˜µç§°
     * @return token
     */
    public static String getToken(@NotNull Long uid, @NotNull String nickname) {
        JWTCreator.Builder builder = JWT.create();
        LocalDateTime now = LocalDateTime.now();
        return builder
                .withHeader(null) //ä¸éœ€è¦è‡ªå·±å¡«å†™
                .withClaim(&quot;uid&quot;, uid)
                .withClaim(&quot;nickname&quot;, nickname)
                .withExpiresAt(now.plusDays(1).toInstant(ZoneOffset.of(&quot;+8&quot;))) // è¿‡æœŸæ—¶é—´
                .sign(Algorithm.HMAC256(TOKEN_SECRET)); //åŠ å¯†æ–¹å¼
    }


    /**
     * è§£æè·å–æ•°æ®
     *
     * @param token ä»¤ç‰Œ
     * @return æ•°æ®
     */
    public static Map&lt;String, Object&gt; verifyToken(@NotNull String token) {
        DecodedJWT verify;
        JWTVerifier verifier = JWT.require(Algorithm.HMAC256(TOKEN_SECRET)).build();
        try {
            verify = verifier.verify(token);
        } catch (Exception e) {
            throw new RuntimeException(&quot;Tokenè®¤è¯å¤±è´¥&quot;);
        }

        String uid = verify.getClaim(&quot;uid&quot;).toString();
        String nickname = verify.getClaim(&quot;nickname&quot;).toString();

        if (StrUtil.isEmpty(uid) || StrUtil.isEmpty(nickname)) {
            throw new RuntimeException(&quot;éæ³•ä»¤ç‰Œ&quot;);
        }
        Map&lt;String, Object&gt; param = new HashMap&lt;&gt;();
        param.put(&quot;uid&quot;, Long.valueOf(uid));
        param.put(&quot;nickname&quot;, nickname);
        return param;
    }
}
</code></pre>
<p>åŠ ä¸Šè¿‡æœŸæ—¶é—´åï¼Œå°±èƒ½åœ¨è®¤è¯çš„åŒæ—¶æ£€éªŒæ˜¯å¦è¿‡æœŸäº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿å‘¢ã€‚</p>
<p>æ¥ä¸‹æ¥æ ¹æ®è‡ªå·±ä¸šåŠ¡æµç¨‹å»å®ç°ç™»å½•æˆæƒï¼Œä¸šåŠ¡é‰´æƒã€‚</p>
<pre><code class="language-java">public Map&lt;String, Object&gt; login(String username, String password) {
        
        ... ç™»å½•ä¸šåŠ¡æµç¨‹

        String token = JwtUtils.getToken(user.getId(), user.getNickname());
        Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();
        map.put(&quot;user&quot;, user);
        map.put(&quot;token&quot;, token);
        return map;
    }
</code></pre>
<p>å°†ç”¨æˆ·ä¿¡æ¯å’Œtokenäº¤ç»™å‰ç«¯ï¼Œæ¯æ¬¡ä¸šåŠ¡è¯·æ±‚å‰éƒ½åœ¨è¯·æ±‚å¤´ä¸Šå¸¦ä¸Štokenï¼Œ<br>
ä¾‹å¦‚æˆ‘ä»¬çº¦å®šå¥½ä»¥ Authorization:token çš„å½¢å¼è·å–ä»¤ç‰Œï¼Œå®ç°HandlerInterceptoræ¥å£ã€‚</p>
<pre><code class="language-java">import cn.hutool.core.util.StrUtil;
import com.litliquid.lionmountaindistribution.common.context.UserHandler;
import com.litliquid.lionmountaindistribution.common.utils.JwtUtils;
import org.jetbrains.annotations.NotNull;
import org.springframework.stereotype.Component;
import org.springframework.util.AntPathMatcher;
import org.springframework.web.servlet.HandlerInterceptor;
import org.springframework.web.servlet.ModelAndView;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.util.Map;

@Component
public class LoginInterceptor implements HandlerInterceptor {

    public static final AntPathMatcher PATH_MATCHER = new AntPathMatcher();

    /**
     * ä¸šåŠ¡æ‰§è¡Œå‰
     */
    @Override
    public boolean preHandle(HttpServletRequest request, @NotNull HttpServletResponse response, @NotNull Object handler) throws Exception {

        //è·å–æœ¬æ¬¡è¯·æ±‚è·¯å¾„
        String requestURI = request.getRequestURI();

        System.out.println(&quot;æ‹¦æˆªåˆ°è¯·æ±‚:&quot; + requestURI);

        //å®šä¹‰ä¸éœ€è¦å¤„ç†çš„è·¯å¾„ï¼ˆä¹Ÿå¯ä»¥åœ¨é…ç½®ç±»ä¸­é…ç½®ï¼‰
        String[] urls = new String[]{

                ...

                &quot;/user/login&quot;,
                &quot;/doc.html&quot;,
                &quot;/swagger-resources&quot;,
                &quot;/v2/api-docs&quot;,
                &quot;/favicon.ico&quot;
        };

        //åˆ¤æ–­æœ¬æ¬¡æ˜¯å¦éœ€è¦å¤„ç†
        boolean check = check(urls, requestURI);

        //å¦‚æœä¸éœ€è¦å¤„ç†ï¼Œåˆ™ç›´æ¥æ”¾è¡Œ
        if (check) {
            return true;
        }

        //1.è·å–tokenä¿¡æ¯
        String authorization = request.getHeader(&quot;Authorization&quot;);
        //2.è§£ætoken åˆ¤æ–­æ˜¯å¦æœ‰æ•ˆ
        if (StrUtil.isEmpty(authorization)) {
            throw new RuntimeException(&quot;ç¼ºå°‘ä»¤ç‰Œ&quot;);
        }
        //3.è§£ætokenä¿¡æ¯
        Map&lt;String, Object&gt; map = JwtUtils.verifyToken(authorization);
        Long uid = (Long) map.get(&quot;uid&quot;);
        String nickname = (String) map.get(&quot;nickname&quot;);
        //4.ä¿å­˜ç”¨æˆ·æ•°æ®
        UserHandler.set(uid);
        //5.è§£ææˆåŠŸæ”¾è¡Œ
        return true;
    }

    @Override
    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception {
    }

    @Override
    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {
        //é‡Šæ”¾å†…å­˜
        UserHandler.remove();
    }

    /**
     * è·¯å¾„åŒ¹é…ï¼Œæ£€æŸ¥æœ¬æ¬¡è¯·æ±‚æ˜¯å¦éœ€è¦æ”¾è¡Œ
     *
     * @param urls è¯·æ±‚ç™½åå•
     * @param requestURI è¯·æ±‚è·¯å¾„
     */
    public boolean check(String[] urls, String requestURI) {
        for (String url : urls) {
            boolean match = PATH_MATCHER.match(url, requestURI);
            if (match) {
                return true;
            }
        }
        return false;
    }
}
</code></pre>
<p>æœ€åå®ç°WebMvcConfigureræ¥å£ï¼Œæ³¨å†Œæ‹¦æˆªå™¨ã€‚</p>
<pre><code class="language-java">import blog.interceptor.UserLoginInterceptor;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.InterceptorRegistration;
import org.springframework.web.servlet.config.annotation.InterceptorRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;
import org.springframework.beans.factory.annotation.Autowired;

@Configuration
public class LoginConfig implements WebMvcConfigurer {

    @Autowired
    private LoginInterceptor loginInterceptor;

    @Override
    public void addInterceptors(InterceptorRegistry registry) {
        registry.addInterceptor(loginInterceptor)
                .addPathPatterns(&quot;/**&quot;); //æ‹¦æˆªæ‰€ä»¥è·¯å¾„
    }
}
</code></pre>
<p>è‡³æ­¤ï¼Œä¸€ä¸ªç®€æ˜“çš„å•ç‚¹ç™»å½•åŠŸèƒ½å°±å®ç°å®Œæˆäº†ã€‚</p>
<h1 id="ï¸æ€»ç»“">âœ”ï¸æ€»ç»“</h1>
<p>å•çº¯ä½¿ç”¨jwtæ–¹æ¡ˆå®ç°å•ç‚¹ç™»å½•ï¼Œå¥½å¤„å°±åœ¨äº<mark>èƒ½æºå¸¦ç”¨æˆ·æ•°æ®ä¸”ä¿è¯æ•°æ®çš„å¯é </mark>ï¼Œä½†åŒæ—¶ç¼ºç‚¹å°±åœ¨äº<mark>æ— æ³•åšåˆ°ä¸»åŠ¨é”€æ¯ä¸€ä¸ªå·²ç»ç­¾å‘çš„ä»¤ç‰Œ</mark>ã€‚è¯·å„ä½å°ä¼™ä¼´ä»¬æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡éœ€æ±‚ï¼Œåˆç†çš„é€‰æ‹©è§£å†³æ–¹æ¡ˆã€‚</p>
<hr>
<h6 id="æœªç»æœ¬äººå…è®¸åˆ‡å‹¿è½¬è½½"><strong>æœªç»æœ¬äººå…è®¸ï¼Œåˆ‡å‹¿è½¬è½½ã€‚</strong></h6>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li><a href="#%E5%89%8D%E8%A8%80"><strong>å‰è¨€</strong></a></li>
<li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8jwt"><strong>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨jwt</strong></a>
<ul>
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AFjwt"><strong>ä»€ä¹ˆæ˜¯jwt</strong></a></li>
<li><a href="#%E6%80%8E%E4%B9%88%E8%AE%A4%E8%AF%81">ğŸ”<strong>æ€ä¹ˆè®¤è¯</strong></a></li>
<li><a href="#%E5%AE%89%E5%85%A8%E6%80%A7">ğŸ”’<strong>å®‰å…¨æ€§</strong></a></li>
</ul>
</li>
<li><a href="#%E6%80%8E%E4%B9%88%E4%BD%BF%E7%94%A8jwt%E5%AE%9E%E7%8E%B0%E7%99%BB%E5%BD%95%E8%AE%A4%E8%AF%81">æ€ä¹ˆä½¿ç”¨jwtå®ç°ç™»å½•è®¤è¯</a></li>
<li><a href="#%EF%B8%8F%E6%80%BB%E7%BB%93">âœ”ï¸æ€»ç»“</a><br>
*<br>
*<br>
*<br>
*<br>
* <a href="#%E6%9C%AA%E7%BB%8F%E6%9C%AC%E4%BA%BA%E5%85%81%E8%AE%B8%E5%88%87%E5%8B%BF%E8%BD%AC%E8%BD%BD"><strong>æœªç»æœ¬äººå…è®¸ï¼Œåˆ‡å‹¿è½¬è½½ã€‚</strong></a></li>
</ul>

              </div>
            </div>
          </article>
        </div>

        

        
          
            <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: '6e22f01009522181efce',
    clientSecret: 'a020328fc365c8214e3921e783040ff318b25a16',
    repo: 'BlogGitalk',
    owner: 'Homchen',
    admin: ['Homchen'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

          

          
        

        <div class="site-footer">
  Blog for <a href="https://homchen.github.io" target="_blank">Augus Chen</a>
  <a class="rss" href="https://homchen.github.io/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
